<!DOCTYPE html>
<!-- saved from url=(0126)http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&_ij_reload=RELOAD_ON_SAVE -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Coverage for main.py: 94%</title>
    <link rel="icon" sizes="32x32" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/favicon_32.png">
    <link rel="stylesheet" href="./coverage_main_py_files/style.css" type="text/css">
    <script type="text/javascript" src="./coverage_main_py_files/coverage_html.js.Без названия" defer=""></script>
<style type="text/css">.vue-slider-dot{position:absolute;-webkit-transition:all 0s;transition:all 0s;z-index:5}.vue-slider-dot:focus{outline:none}.vue-slider-dot-tooltip{position:absolute;visibility:hidden}.vue-slider-dot-hover:hover .vue-slider-dot-tooltip,.vue-slider-dot-tooltip-show{visibility:visible}.vue-slider-dot-tooltip-top{top:-10px;left:50%;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.vue-slider-dot-tooltip-bottom{bottom:-10px;left:50%;-webkit-transform:translate(-50%,100%);transform:translate(-50%,100%)}.vue-slider-dot-tooltip-left{left:-10px;top:50%;-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%)}.vue-slider-dot-tooltip-right{right:-10px;top:50%;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%)}</style><style type="text/css">.vue-slider-marks{position:relative;width:100%;height:100%}.vue-slider-mark{position:absolute;z-index:1}.vue-slider-ltr .vue-slider-mark,.vue-slider-rtl .vue-slider-mark{width:0;height:100%;top:50%}.vue-slider-ltr .vue-slider-mark-step,.vue-slider-rtl .vue-slider-mark-step{top:0}.vue-slider-ltr .vue-slider-mark-label,.vue-slider-rtl .vue-slider-mark-label{top:100%;margin-top:10px}.vue-slider-ltr .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ltr .vue-slider-mark-step{left:0}.vue-slider-ltr .vue-slider-mark-label{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.vue-slider-rtl .vue-slider-mark{-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.vue-slider-rtl .vue-slider-mark-step{right:0}.vue-slider-rtl .vue-slider-mark-label{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.vue-slider-btt .vue-slider-mark,.vue-slider-ttb .vue-slider-mark{width:100%;height:0;left:50%}.vue-slider-btt .vue-slider-mark-step,.vue-slider-ttb .vue-slider-mark-step{left:0}.vue-slider-btt .vue-slider-mark-label,.vue-slider-ttb .vue-slider-mark-label{left:100%;margin-left:10px}.vue-slider-btt .vue-slider-mark{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.vue-slider-btt .vue-slider-mark-step{top:0}.vue-slider-btt .vue-slider-mark-label{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-slider-ttb .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ttb .vue-slider-mark-step{bottom:0}.vue-slider-ttb .vue-slider-mark-label{bottom:50%;-webkit-transform:translateY(50%);transform:translateY(50%)}.vue-slider-mark-label,.vue-slider-mark-step{position:absolute}</style><style type="text/css">.vue-slider{position:relative;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.vue-slider-rail{position:relative;width:100%;height:100%;-webkit-transition-property:width,height,left,right,top,bottom;transition-property:width,height,left,right,top,bottom}.vue-slider-process{position:absolute;z-index:1}</style><style>@import url("chrome-extension://adlpodnneegcnbophopdmhedicjbcgco/content/styles.css");</style></head>
<body class="pyfile">
<header class="">
    <div class="content">
        <h1>
            <span class="text">Coverage for </span><b>main.py</b>:
            <span class="pc_cov">94%</span>
        </h1>
        <aside id="help_panel_wrapper">
            <input id="help_panel_state" type="checkbox">
            <label for="help_panel_state">
                <img id="keyboard_icon" src="./coverage_main_py_files/keybd_closed.png" alt="Show/hide keyboard shortcuts">
            </label>
            <div id="help_panel">
                <p class="legend">Shortcuts on this page</p>
                <div class="keyhelp">
                    <p>
                        <kbd>r</kbd>
                        <kbd>m</kbd>
                        <kbd>x</kbd>
                        &nbsp; toggle line displays
                    </p>
                    <p>
                        <kbd>j</kbd>
                        <kbd>k</kbd>
                        &nbsp; next/prev highlighted chunk
                    </p>
                    <p>
                        <kbd>0</kbd> &nbsp; (zero) top of page
                    </p>
                    <p>
                        <kbd>1</kbd> &nbsp; (one) first highlighted chunk
                    </p>
                    <p>
                        <kbd>[</kbd>
                        <kbd>]</kbd>
                        &nbsp; prev/next file
                    </p>
                    <p>
                        <kbd>u</kbd> &nbsp; up to the index
                    </p>
                    <p>
                        <kbd>?</kbd> &nbsp; show/hide this help
                    </p>
                </div>
            </div>
        </aside>
        <h2>
            <span class="text">115 statements &nbsp;</span>
            <button type="button" class="run button_toggle_run show_run" value="run" data-shortcut="r" title="Toggle lines run">108<span class="text"> run</span></button>
            <button type="button" class="mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">7<span class="text"> missing</span></button>
            <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
        </h2>
        <p class="text">
            <a id="prevFileLink" class="nav" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/d_a9d8ae1b01eede66_utils_py.html">« prev</a> &nbsp; &nbsp;
            <a id="indexLink" class="nav" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/index.html">^ index</a> &nbsp; &nbsp;
            <a id="nextFileLink" class="nav" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/d_a44f0ac069e85531_test_bot_py.html">» next</a>
            &nbsp; &nbsp; &nbsp;
            <a class="nav" href="https://coverage.readthedocs.io/en/7.4.1">coverage.py v7.4.1</a>,
            created at 2024-02-12 10:06 +0300
        </p>
        <aside class="hidden">
            <button type="button" class="button_next_chunk" data-shortcut="j">
            </button><button type="button" class="button_prev_chunk" data-shortcut="k">
            </button><button type="button" class="button_top_of_page" data-shortcut="0">
            </button><button type="button" class="button_first_chunk" data-shortcut="1">
            </button><button type="button" class="button_prev_file" data-shortcut="[">
            </button><button type="button" class="button_next_file" data-shortcut="]">
            </button><button type="button" class="button_to_index" data-shortcut="u">
            </button><button type="button" class="button_show_hide_help" data-shortcut="?">
        </button></aside>
    </div>
</header>
<main id="source">
    <p class="pln"><span class="n"><a id="t1" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t1">1</a></span><span class="t"><span class="com"># pip install aiogram</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t2" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t2">2</a></span><span class="t"><span class="com"># python.exe -m pip install --upgrade pip</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t3" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t3">3</a></span><span class="t"><span class="com"># pip install python-dotenv</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t4" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t4">4</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t5" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t5">5</a></span><span class="t"><span class="com"># pip install aiogram==3.0.0b7</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t6" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t6">6</a></span><span class="t"><span class="com"># pip install pytest==7.4.4</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t7" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t7">7</a></span><span class="t"><span class="com"># pip install pytest-asyncio==0.23.4</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t8" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t8">8</a></span><span class="t"><span class="com"># aiogram_tests скачать папку и закинуть в директорию</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t9" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t9">9</a></span><span class="t"><span class="com"># pip install coverage</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t10" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t10">10</a></span><span class="t"><span class="com"># coverage run -m pytest test_bot.py</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t11" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t11">11</a></span><span class="t"><span class="com"># coverage report -m</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t12" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t12">12</a></span><span class="t"><span class="com"># coverage html</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t13" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t13">13</a></span><span class="t"><span class="com"># coverage erase</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t14" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t14">14</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t15" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t15">15</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t16" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t16">16</a></span><span class="t"><span class="key">import</span> <span class="nam">asyncio</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t17" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t17">17</a></span><span class="t"><span class="key">import</span> <span class="nam">logging</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t18" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t18">18</a></span><span class="t"><span class="key">import</span> <span class="nam">os</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t19" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t19">19</a></span><span class="t"><span class="key">import</span> <span class="nam">sys</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t20" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t20">20</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t21" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t21">21</a></span><span class="t"><span class="key">from</span> <span class="nam">aiogram</span> <span class="key">import</span> <span class="nam">Bot</span><span class="op">,</span> <span class="nam">Dispatcher</span><span class="op">,</span> <span class="nam">F</span><span class="op">,</span> <span class="nam">Router</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t22" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t22">22</a></span><span class="t"><span class="key">from</span> <span class="nam">aiogram</span><span class="op">.</span><span class="nam">enums</span> <span class="key">import</span> <span class="nam">ParseMode</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t23" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t23">23</a></span><span class="t"><span class="key">from</span> <span class="nam">aiogram</span><span class="op">.</span><span class="nam">filters</span> <span class="key">import</span> <span class="nam">Command</span><span class="op">,</span> <span class="nam">StateFilter</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t24" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t24">24</a></span><span class="t"><span class="key">from</span> <span class="nam">aiogram</span><span class="op">.</span><span class="nam">fsm</span><span class="op">.</span><span class="nam">context</span> <span class="key">import</span> <span class="nam">FSMContext</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t25" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t25">25</a></span><span class="t"><span class="key">from</span> <span class="nam">aiogram</span><span class="op">.</span><span class="nam">fsm</span><span class="op">.</span><span class="nam">state</span> <span class="key">import</span> <span class="nam">default_state</span><span class="op">,</span> <span class="nam">State</span><span class="op">,</span> <span class="nam">StatesGroup</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t26" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t26">26</a></span><span class="t"><span class="key">from</span> <span class="nam">aiogram</span><span class="op">.</span><span class="nam">types</span> <span class="key">import</span> <span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t27" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t27">27</a></span><span class="t">    <span class="nam">KeyboardButton</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t28" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t28">28</a></span><span class="t">    <span class="nam">Message</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t29" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t29">29</a></span><span class="t">    <span class="nam">ReplyKeyboardMarkup</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t30" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t30">30</a></span><span class="t">    <span class="nam">ReplyKeyboardRemove</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t31" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t31">31</a></span><span class="t"><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t32" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t32">32</a></span><span class="t"><span class="key">from</span> <span class="nam">dotenv</span> <span class="key">import</span> <span class="nam">load_dotenv</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t33" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t33">33</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t34" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t34">34</a></span><span class="t"><span class="key">from</span> <span class="nam">LightFMClass</span> <span class="key">import</span> <span class="nam">LightFMRecSyc</span><span class="op">,</span> <span class="nam">moveis_fin</span><span class="op">,</span> <span class="nam">movies_to_predict</span><span class="op">,</span> <span class="nam">RecSycFilms</span><span class="op">,</span> <span class="nam">ClassRecSyc</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t35" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t35">35</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t36" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t36">36</a></span><span class="t"><span class="nam">load_dotenv</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t37" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t37">37</a></span><span class="t"><span class="nam">TOKEN</span> <span class="op">=</span> <span class="nam">os</span><span class="op">.</span><span class="nam">getenv</span><span class="op">(</span><span class="str">'BOT_TOKEN_TEST'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t38" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t38">38</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t39" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t39">39</a></span><span class="t"><span class="nam">form_router</span> <span class="op">=</span> <span class="nam">Router</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t40" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t40">40</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t41" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t41">41</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t42" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t42">42</a></span><span class="t"><span class="key">class</span> <span class="nam">Form</span><span class="op">(</span><span class="nam">StatesGroup</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t43" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t43">43</a></span><span class="t">    <span class="nam">exist_user_status</span> <span class="op">=</span> <span class="nam">State</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t44" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t44">44</a></span><span class="t">    <span class="nam">check_id_status</span> <span class="op">=</span> <span class="nam">State</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t45" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t45">45</a></span><span class="t">    <span class="nam">auth_ok_status</span> <span class="op">=</span> <span class="nam">State</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t46" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t46">46</a></span><span class="t">    <span class="nam">choice_genre</span> <span class="op">=</span> <span class="nam">State</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t47" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t47">47</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t48" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t48">48</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t49" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t49">49</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t50" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t50">50</a></span><span class="t"><span class="str">data = {</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t51" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t51">51</a></span><span class="t"><span class="str">    'exist_user': '',</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t52" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t52">52</a></span><span class="t"><span class="str">    'current_id': 0,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t53" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t53">53</a></span><span class="t"><span class="str">    'current_genre': ''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t54" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t54">54</a></span><span class="t"><span class="str">}</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t55" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t55">55</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t56" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t56">56</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t57" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t57">57</a></span><span class="t"><span class="nam">avaliable_user_id</span> <span class="op">=</span> <span class="op">[</span><span class="num">195</span><span class="op">,</span> <span class="num">1010</span><span class="op">,</span> <span class="num">7438</span><span class="op">,</span> <span class="num">30323</span><span class="op">,</span> <span class="num">30349</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t58" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t58">58</a></span><span class="t"><span class="nam">rec_films</span> <span class="op">=</span> <span class="op">[</span><span class="str">'Фильм1'</span><span class="op">,</span> <span class="str">'Фильм2'</span><span class="op">,</span> <span class="str">'Фильм3'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t59" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t59">59</a></span><span class="t"><span class="nam">rec_films_genre</span> <span class="op">=</span> <span class="op">[</span><span class="str">'Анимация'</span><span class="op">,</span> <span class="str">'Вестерн'</span><span class="op">,</span> <span class="str">'Военный'</span><span class="op">,</span> <span class="str">'Детский'</span><span class="op">,</span> <span class="str">'Документальный'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t60" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t60">60</a></span><span class="t">                   <span class="str">'Драма'</span><span class="op">,</span> <span class="str">'Комедия'</span><span class="op">,</span> <span class="str">'Криминал'</span><span class="op">,</span> <span class="str">'Мистика'</span><span class="op">,</span> <span class="str">'Мюзикл'</span><span class="op">,</span> <span class="str">'Нуар'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t61" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t61">61</a></span><span class="t">                   <span class="str">'Приключения'</span><span class="op">,</span> <span class="str">'Романтика'</span><span class="op">,</span> <span class="str">'Триллер'</span><span class="op">,</span> <span class="str">'Ужасы'</span><span class="op">,</span> <span class="str">'Фантастика'</span><span class="op">,</span> <span class="str">'Фэнтези'</span><span class="op">,</span> <span class="str">'Экшен'</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t62" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t62">62</a></span><span class="t">                   <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t63" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t63">63</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t64" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t64">64</a></span><span class="t"><span class="nam">genre_dict</span> <span class="op">=</span> <span class="op">{</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t65" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t65">65</a></span><span class="t">    <span class="str">"Экшен"</span><span class="op">:</span> <span class="str">"Action"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t66" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t66">66</a></span><span class="t">    <span class="str">"Приключения"</span><span class="op">:</span> <span class="str">"Adventure"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t67" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t67">67</a></span><span class="t">    <span class="str">"Анимация"</span><span class="op">:</span> <span class="str">"Animation"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t68" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t68">68</a></span><span class="t">    <span class="str">"Детский"</span><span class="op">:</span> <span class="str">"Children's"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t69" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t69">69</a></span><span class="t">    <span class="str">"Комедия"</span><span class="op">:</span> <span class="str">"Comedy"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t70" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t70">70</a></span><span class="t">    <span class="str">"Криминал"</span><span class="op">:</span> <span class="str">"Crime"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t71" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t71">71</a></span><span class="t">    <span class="str">"Документальный"</span><span class="op">:</span> <span class="str">"Documentary"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t72" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t72">72</a></span><span class="t">    <span class="str">"Драма"</span><span class="op">:</span> <span class="str">"Drama"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t73" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t73">73</a></span><span class="t">    <span class="str">"Фэнтези"</span><span class="op">:</span> <span class="str">"Fantasy"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t74" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t74">74</a></span><span class="t">    <span class="str">"Нуар"</span><span class="op">:</span> <span class="str">"Film-Noir"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t75" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t75">75</a></span><span class="t">    <span class="str">"Ужасы"</span><span class="op">:</span> <span class="str">"Horror"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t76" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t76">76</a></span><span class="t">    <span class="str">"Мюзикл"</span><span class="op">:</span> <span class="str">"Musical"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t77" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t77">77</a></span><span class="t">    <span class="str">"Мистика"</span><span class="op">:</span> <span class="str">"Mystery"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t78" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t78">78</a></span><span class="t">    <span class="str">"Романтика"</span><span class="op">:</span> <span class="str">"Romance"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t79" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t79">79</a></span><span class="t">    <span class="str">"Фантастика"</span><span class="op">:</span> <span class="str">"Sci-Fi"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t80" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t80">80</a></span><span class="t">    <span class="str">"Триллер"</span><span class="op">:</span> <span class="str">"Thriller"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t81" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t81">81</a></span><span class="t">    <span class="str">"Военный"</span><span class="op">:</span> <span class="str">"War"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t82" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t82">82</a></span><span class="t">    <span class="str">"Вестерн"</span><span class="op">:</span> <span class="str">"Western"</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t83" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t83">83</a></span><span class="t"><span class="op">}</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t84" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t84">84</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t85" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t85">85</a></span><span class="t"><span class="str">Краткое описание:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t86" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t86">86</a></span><span class="t"><span class="str">1. Вопрос авторизации (если пользователь уже пользовался - НЕТ, если впервые пришел - ДА)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t87" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t87">87</a></span><span class="t"><span class="str">2. [Если 1п - НЕТ] - Задаем вопрос на проверку его id у себя в данных</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t88" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t88">88</a></span><span class="t"><span class="str">3. [Если 1п - НЕТ + 2п - ввел число] - проверяем в данных, если есть пропускаем к 4п, если нет, просим ввести повторно</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t89" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t89">89</a></span><span class="t"><span class="str">4. Открытие основного функционала: </span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t90" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t90">90</a></span><span class="t"><span class="str">            - покажи рекомендации           - вывод рекомендаций из всех фильмов</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t91" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t91">91</a></span><span class="t"><span class="str">            - покажи рекомендации по жанру  - вывод рекомендаций по жанру</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t92" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t92">92</a></span><span class="t"><span class="str">            - понравится ли мне фильм?      - TBD пользователь вводит название фильма, мы предсказываем понравится/нет</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t93" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t93">93</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t94" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t94">94</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t95" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t95">95</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t96" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t96">96</a></span><span class="t"><span class="str"> ----------------------------------------------------------------------------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t97" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t97">97</a></span><span class="t"><span class="str">---------------------------------------------   0. Общие ручки   ------------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t98" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t98">98</a></span><span class="t"><span class="str">-----------------------------------------------------------------------------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t99" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t99">99</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t100" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t100">100</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t101" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t101">101</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t102" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t102">102</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">StateFilter</span><span class="op">(</span><span class="nam">default_state</span><span class="op">)</span><span class="op">,</span> <span class="op">~</span><span class="nam">Command</span><span class="op">(</span><span class="str">"start"</span><span class="op">)</span><span class="op">,</span> <span class="op">~</span><span class="nam">Command</span><span class="op">(</span><span class="str">"authors"</span><span class="op">)</span><span class="op">,</span> <span class="op">~</span><span class="nam">Command</span><span class="op">(</span><span class="str">"test_25"</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t103" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t103">103</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">unknown_func</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t104" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t104">104</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">'Для работы сервиса необходимо авторизоваться (/start)\n'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t105" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t105">105</a></span><span class="t">                         <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardRemove</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t106" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t106">106</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t107" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t107">107</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t108" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t108">108</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Command</span><span class="op">(</span><span class="str">"authors"</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t109" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t109">109</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">author_func</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t110" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t110">110</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">'Авторы бота:\nВлад Панфиленко\nЛилия Хорошенина'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t111" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t111">111</a></span><span class="t">                         <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardRemove</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t112" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t112">112</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t113" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t113">113</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t114" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t114">114</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t115" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t115">115</a></span><span class="t"><span class="str"> ----------------------------------------------------------------------------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t116" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t116">116</a></span><span class="t"><span class="str">---------------------------------------------   1. Первый вопрос   ----------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t117" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t117">117</a></span><span class="t"><span class="str">-----------------------------------------------------------------------------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t118" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t118">118</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t119" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t119">119</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t120" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t120">120</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t121" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t121">121</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Command</span><span class="op">(</span><span class="str">"start"</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t122" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t122">122</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">first_auth</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t123" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t123">123</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">set_state</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">exist_user_status</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t124" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t124">124</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t125" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t125">125</a></span><span class="t">        <span class="str">f"Привет)\n"</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t126" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t126">126</a></span><span class="t">        <span class="str">f"Этот бот может рекомендовать фильмы\n"</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t127" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t127">127</a></span><span class="t">        <span class="str">f"Подскажи, впервые пользуешься ботом?\n"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t128" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t128">128</a></span><span class="t">        <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t129" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t129">129</a></span><span class="t">            <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t130" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t130">130</a></span><span class="t">                <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t131" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t131">131</a></span><span class="t">                    <span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">"Да, я новый пользователь"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t132" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t132">132</a></span><span class="t">                    <span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">"Нет, уже пользовался"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t133" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t133">133</a></span><span class="t">                <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t134" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t134">134</a></span><span class="t">            <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t135" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t135">135</a></span><span class="t">            <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t136" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t136">136</a></span><span class="t">        <span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t137" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t137">137</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t138" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t138">138</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t139" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t139">139</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t140" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t140">140</a></span><span class="t"><span class="com"># 1.1 Первый ответ - непонятно</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t141" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t141">141</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">exist_user_status</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t142" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t142">142</a></span><span class="t">                     <span class="op">~</span><span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">in_</span><span class="op">(</span><span class="op">[</span><span class="str">'да, я новый пользователь'</span><span class="op">,</span> <span class="str">'нет, уже пользовался'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t143" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t143">143</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">first_auth_err</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t144" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t144">144</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">"Я тебя не понимаю, выбери одну из предложенных кнопок ниже"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t145" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t145">145</a></span><span class="t">                         <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t146" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t146">146</a></span><span class="t">                             <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t147" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t147">147</a></span><span class="t">                                 <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t148" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t148">148</a></span><span class="t">                                     <span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">"Да, я новый пользователь"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t149" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t149">149</a></span><span class="t">                                     <span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">"Нет, уже пользовался"</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t150" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t150">150</a></span><span class="t">                                 <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t151" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t151">151</a></span><span class="t">                             <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t152" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t152">152</a></span><span class="t">                             <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t153" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t153">153</a></span><span class="t">                         <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t154" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t154">154</a></span><span class="t">                         <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t155" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t155">155</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t156" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t156">156</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t157" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t157">157</a></span><span class="t"><span class="com"># 1 -&gt; 2 Первый ответ - НЕТ (существующий пользователь)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t158" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t158">158</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">exist_user_status</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="str">"нет, уже пользовался"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t159" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t159">159</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">first_auth_no</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t160" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t160">160</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">update_data</span><span class="op">(</span><span class="nam">exist_user</span><span class="op">=</span><span class="str">'old'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t161" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t161">161</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t162" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t162">162</a></span><span class="t">        <span class="str">"Введи свой id чтобы мы могли узнать тебя:"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t163" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t163">163</a></span><span class="t">        <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardRemove</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t164" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t164">164</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t165" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t165">165</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">set_state</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">check_id_status</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t166" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t166">166</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t167" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t167">167</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t168" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t168">168</a></span><span class="t"><span class="com"># 2 -&gt; 4 первый ответ проверка id и переход к меню ИЛИ 2 -&gt; 3 первый ответ проверка id - не найден id</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t169" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t169">169</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">check_id_status</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">isdigit</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t170" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t170">170</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">first_auth_no_check_id</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t171" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t171">171</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">update_data</span><span class="op">(</span><span class="nam">current_id</span><span class="op">=</span><span class="nam">int</span><span class="op">(</span><span class="nam">message</span><span class="op">.</span><span class="nam">text</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t172" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t172">172</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">get_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t173" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t173">173</a></span><span class="t">    <span class="key">if</span> <span class="nam">int</span><span class="op">(</span><span class="nam">message</span><span class="op">.</span><span class="nam">text</span><span class="op">)</span> <span class="key">in</span> <span class="nam">avaliable_user_id</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t174" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t174">174</a></span><span class="t">        <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">f"Отлично, пользователь {data['current_id']}!\n\n&lt;b&gt;Нажмите кнопку внизу -&gt; Меню&lt;/b&gt;"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t175" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t175">175</a></span><span class="t">                             <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t176" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t176">176</a></span><span class="t">                                 <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span><span class="op">[</span><span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">"Меню"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t177" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t177">177</a></span><span class="t">                                 <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t178" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t178">178</a></span><span class="t">                             <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t179" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t179">179</a></span><span class="t">                             <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t180" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t180">180</a></span><span class="t">        <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">set_state</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t181" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t181">181</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t182" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t182">182</a></span><span class="t">        <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">'Нет такого пользователя'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t183" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t183">183</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t184" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t184">184</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t185" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t185">185</a></span><span class="t"><span class="com"># 3 первый ответ проверка id - не найден id</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t186" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t186">186</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">check_id_status</span><span class="op">,</span> <span class="op">~</span><span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">isdigit</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t187" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t187">187</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">first_auth_unknown</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t188" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t188">188</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">f"Некорректный ввод, введи цифры"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t189" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t189">189</a></span><span class="t">                         <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardRemove</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t190" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t190">190</a></span><span class="t">                         <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t191" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t191">191</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t192" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t192">192</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t193" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t193">193</a></span><span class="t"><span class="com"># 1 -&gt; 4 Первый ответ - ДА (новый пользователь)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t194" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t194">194</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">exist_user_status</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="str">"да, я новый пользователь"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t195" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t195">195</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">first_auth_yes</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t196" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t196">196</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">update_data</span><span class="op">(</span><span class="nam">exist_user</span><span class="op">=</span><span class="str">'new'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t197" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t197">197</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">update_data</span><span class="op">(</span><span class="nam">current_id</span><span class="op">=</span><span class="num">123456</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t198" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t198">198</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">get_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t199" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t199">199</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t200" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t200">200</a></span><span class="t">        <span class="str">f"Ничего страшного!\nТвой новый id {data['current_id']}\n\n&lt;b&gt;Нажмите кнопку внизу -&gt; Меню&lt;/b&gt;"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t201" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t201">201</a></span><span class="t">        <span class="nam">parse_mode</span><span class="op">=</span><span class="nam">ParseMode</span><span class="op">.</span><span class="nam">HTML</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t202" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t202">202</a></span><span class="t">        <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t203" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t203">203</a></span><span class="t">            <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t204" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t204">204</a></span><span class="t">                <span class="op">[</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t205" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t205">205</a></span><span class="t">                    <span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">"Меню"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t206" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t206">206</a></span><span class="t">                <span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t207" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t207">207</a></span><span class="t">            <span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t208" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t208">208</a></span><span class="t">            <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t209" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t209">209</a></span><span class="t">        <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t210" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t210">210</a></span><span class="t">    <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t211" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t211">211</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">set_state</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t212" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t212">212</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t213" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t213">213</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t214" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t214">214</a></span><span class="t"><span class="com"># ??? ПРОМЕЖУТОЧНАЯ РУЧКА - если пользователь не авторизовался и хочет дергать основные функции</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t215" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t215">215</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="op">~</span><span class="nam">StateFilter</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">)</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t216" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t216">216</a></span><span class="t">                     <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">in_</span><span class="op">(</span><span class="op">[</span><span class="str">"покажи рекомендации"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t217" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t217">217</a></span><span class="t">                                            <span class="str">"покажи рекомендации по жанру"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t218" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t218">218</a></span><span class="t">                                            <span class="str">"понравится ли мне фильм?"</span><span class="op">]</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t219" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t219">219</a></span><span class="t">                     <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t220" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t220">220</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">send_chouse_film</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t221" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t221">221</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">'Для начала необходимо авторизоваться (/start)'</span><span class="op">,</span> <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardRemove</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t222" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t222">222</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t223" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t223">223</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t224" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t224">224</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t225" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t225">225</a></span><span class="t"><span class="str"> ----------------------------------------------------------------------------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t226" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t226">226</a></span><span class="t"><span class="str">-------------------------------------   2. Переход к основному функционалу   ------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t227" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t227">227</a></span><span class="t"><span class="str">-----------------------------------------------------------------------------------------------------------------</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t228" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t228">228</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t229" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t229">229</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t230" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t230">230</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t231" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t231">231</a></span><span class="t"><span class="com"># 4. Основное меню, открывается только после авторизации</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t232" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t232">232</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="str">"меню"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t233" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t233">233</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">show_summary</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="key">None</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t234" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t234">234</a></span><span class="t">    <span class="nam">keyboard_values</span> <span class="op">=</span> <span class="op">[</span><span class="str">"Покажи рекомендации"</span><span class="op">,</span> <span class="str">"Покажи рекомендации по жанру"</span><span class="op">,</span> <span class="str">"Понравится ли мне фильм?"</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t235" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t235">235</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">get_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t236" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t236">236</a></span><span class="t">    <span class="key">if</span> <span class="nam">data</span><span class="op">[</span><span class="str">'exist_user'</span><span class="op">]</span> <span class="op">==</span> <span class="str">"new"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t237" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t237">237</a></span><span class="t">        <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">"Чем могу помочь?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t238" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t238">238</a></span><span class="t">                             <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t239" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t239">239</a></span><span class="t">                                 <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span><span class="op">[</span><span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="nam">i</span><span class="op">)</span><span class="op">]</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">keyboard_values</span><span class="op">[</span><span class="op">:</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t240" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t240">240</a></span><span class="t">                                 <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t241" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t241">241</a></span><span class="t">                             <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t242" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t242">242</a></span><span class="t">                             <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t243" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t243">243</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t244" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t244">244</a></span><span class="t">        <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">"Чем могу помочь?"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t245" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t245">245</a></span><span class="t">                             <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t246" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t246">246</a></span><span class="t">                                 <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span><span class="op">[</span><span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="nam">i</span><span class="op">)</span><span class="op">]</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">keyboard_values</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t247" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t247">247</a></span><span class="t">                                 <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t248" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t248">248</a></span><span class="t">                             <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t249" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t249">249</a></span><span class="t">                             <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t250" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t250">250</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t251" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t251">251</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t252" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t252">252</a></span><span class="t"><span class="com"># 4.1 Ручка обычных рекомендаций, делиться на "холодных" и "обычных пользователе"</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t253" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t253">253</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="str">"покажи рекомендации"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t254" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t254">254</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">list_rec_film</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t255" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t255">255</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">get_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t256" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t256">256</a></span><span class="t">    <span class="nam">lfm</span> <span class="op">=</span> <span class="nam">LightFMRecSyc</span><span class="op">(</span><span class="nam">model</span><span class="op">=</span><span class="nam">ClassRecSyc</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t257" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t257">257</a></span><span class="t">                        <span class="nam">RecSycFilms</span><span class="op">=</span><span class="nam">RecSycFilms</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t258" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t258">258</a></span><span class="t">                        <span class="nam">IMDb_df</span><span class="op">=</span><span class="nam">moveis_fin</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t259" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t259">259</a></span><span class="t">                        <span class="nam">Genre</span><span class="op">=</span><span class="key">None</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t260" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t260">260</a></span><span class="t">    <span class="key">if</span> <span class="nam">data</span><span class="op">[</span><span class="str">'exist_user'</span><span class="op">]</span> <span class="op">==</span> <span class="str">"new"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t261" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t261">261</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">lfm</span><span class="op">.</span><span class="nam">recommend</span><span class="op">(</span><span class="nam">user_id</span><span class="op">=</span><span class="op">[</span><span class="num">123456789</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">5</span><span class="op">,</span> <span class="nam">movies_to_predict</span><span class="op">=</span><span class="nam">movies_to_predict</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t262" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t262">262</a></span><span class="t">        <span class="nam">current_rec_films</span> <span class="op">=</span> <span class="str">"\n"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">result</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t263" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t263">263</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t264" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t264">264</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">lfm</span><span class="op">.</span><span class="nam">recommend</span><span class="op">(</span><span class="nam">user_id</span><span class="op">=</span><span class="op">[</span><span class="nam">data</span><span class="op">[</span><span class="str">'current_id'</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">5</span><span class="op">,</span> <span class="nam">movies_to_predict</span><span class="op">=</span><span class="nam">movies_to_predict</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t265" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t265">265</a></span><span class="t">        <span class="nam">current_rec_films</span> <span class="op">=</span> <span class="str">"\n"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">result</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t266" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t266">266</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">f'Список фильмов которые тебе понравятся:\n\n{current_rec_films}'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t267" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t267">267</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t268" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t268">268</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t269" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t269">269</a></span><span class="t"><span class="com"># 4.2 Ручка "жанровых" рекомендаций, делиться на "холодных" и "обычных пользователе"</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t270" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t270">270</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="str">"покажи рекомендации по жанру"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t271" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t271">271</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">choice_genre</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t272" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t272">272</a></span><span class="t">    <span class="nam">keyboard_values</span> <span class="op">=</span> <span class="nam">rec_films_genre</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t273" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t273">273</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">"Выберите жанр:"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t274" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t274">274</a></span><span class="t">                         <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t275" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t275">275</a></span><span class="t">                             <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span><span class="op">[</span><span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="nam">i</span><span class="op">)</span><span class="op">]</span> <span class="key">for</span> <span class="nam">i</span> <span class="key">in</span> <span class="nam">keyboard_values</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t276" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t276">276</a></span><span class="t">                             <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t277" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t277">277</a></span><span class="t">                         <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t278" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t278">278</a></span><span class="t">                         <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t279" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t279">279</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">set_state</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">choice_genre</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t280" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t280">280</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t281" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t281">281</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t282" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t282">282</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">choice_genre</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span><span class="op">.</span><span class="nam">in_</span><span class="op">(</span><span class="nam">list</span><span class="op">(</span><span class="nam">map</span><span class="op">(</span><span class="nam">str</span><span class="op">.</span><span class="nam">casefold</span><span class="op">,</span> <span class="nam">rec_films_genre</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t283" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t283">283</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">list_rec_film_genre</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">,</span> <span class="nam">state</span><span class="op">:</span> <span class="nam">FSMContext</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t284" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t284">284</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">update_data</span><span class="op">(</span><span class="nam">current_genre</span><span class="op">=</span><span class="nam">message</span><span class="op">.</span><span class="nam">text</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t285" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t285">285</a></span><span class="t">    <span class="nam">data</span> <span class="op">=</span> <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">get_data</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t286" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t286">286</a></span><span class="t">    <span class="nam">lfm</span> <span class="op">=</span> <span class="nam">LightFMRecSyc</span><span class="op">(</span><span class="nam">model</span><span class="op">=</span><span class="nam">ClassRecSyc</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t287" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t287">287</a></span><span class="t">                        <span class="nam">RecSycFilms</span><span class="op">=</span><span class="nam">RecSycFilms</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t288" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t288">288</a></span><span class="t">                        <span class="nam">IMDb_df</span><span class="op">=</span><span class="nam">moveis_fin</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t289" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t289">289</a></span><span class="t">                        <span class="nam">Genre</span><span class="op">=</span><span class="nam">genre_dict</span><span class="op">.</span><span class="nam">get</span><span class="op">(</span><span class="nam">data</span><span class="op">[</span><span class="str">'current_genre'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t290" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t290">290</a></span><span class="t">    <span class="key">if</span> <span class="nam">data</span><span class="op">[</span><span class="str">'exist_user'</span><span class="op">]</span> <span class="op">==</span> <span class="str">"new"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t291" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t291">291</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">lfm</span><span class="op">.</span><span class="nam">recommend</span><span class="op">(</span><span class="nam">user_id</span><span class="op">=</span><span class="op">[</span><span class="num">123456789</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">5</span><span class="op">,</span> <span class="nam">movies_to_predict</span><span class="op">=</span><span class="nam">movies_to_predict</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t292" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t292">292</a></span><span class="t">        <span class="nam">current_rec_films</span> <span class="op">=</span> <span class="str">"\n"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">result</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t293" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t293">293</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t294" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t294">294</a></span><span class="t">        <span class="nam">result</span> <span class="op">=</span> <span class="nam">lfm</span><span class="op">.</span><span class="nam">recommend</span><span class="op">(</span><span class="nam">user_id</span><span class="op">=</span><span class="op">[</span><span class="nam">data</span><span class="op">[</span><span class="str">'current_id'</span><span class="op">]</span><span class="op">]</span><span class="op">,</span> <span class="nam">k</span><span class="op">=</span><span class="num">5</span><span class="op">,</span> <span class="nam">movies_to_predict</span><span class="op">=</span><span class="nam">movies_to_predict</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t295" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t295">295</a></span><span class="t">        <span class="nam">current_rec_films</span> <span class="op">=</span> <span class="str">"\n"</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">result</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t296" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t296">296</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t297" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t297">297</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">f"Вы ваши рекомендации по жанру {data['current_genre']}:\n\n"</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t298" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t298">298</a></span><span class="t">                         <span class="str">f"{current_rec_films}\n\n"</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t299" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t299">299</a></span><span class="t">                         <span class="str">f"Для возврата к меню &lt;b&gt;Нажмите кнопку внизу -&gt; меню&lt;/b&gt;"</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t300" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t300">300</a></span><span class="t">                         <span class="nam">reply_markup</span><span class="op">=</span><span class="nam">ReplyKeyboardMarkup</span><span class="op">(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t301" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t301">301</a></span><span class="t">                             <span class="nam">keyboard</span><span class="op">=</span><span class="op">[</span><span class="op">[</span><span class="nam">KeyboardButton</span><span class="op">(</span><span class="nam">text</span><span class="op">=</span><span class="str">"Меню"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t302" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t302">302</a></span><span class="t">                             <span class="nam">resize_keyboard</span><span class="op">=</span><span class="key">True</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t303" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t303">303</a></span><span class="t">                         <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t304" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t304">304</a></span><span class="t">                         <span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t305" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t305">305</a></span><span class="t">    <span class="key">await</span> <span class="nam">state</span><span class="op">.</span><span class="nam">set_state</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t306" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t306">306</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t307" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t307">307</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t308" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t308">308</a></span><span class="t"><span class="com"># 4.3 Ручка предсказания фильма (TBD), делить на "холодных" и "обычных пользователе"</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t309" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t309">309</a></span><span class="t"><span class="op">@</span><span class="nam">form_router</span><span class="op">.</span><span class="nam">message</span><span class="op">(</span><span class="nam">Form</span><span class="op">.</span><span class="nam">auth_ok_status</span><span class="op">,</span> <span class="nam">F</span><span class="op">.</span><span class="nam">text</span><span class="op">.</span><span class="nam">casefold</span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="str">"понравится ли мне фильм?"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t310" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t310">310</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">predict_film</span><span class="op">(</span><span class="nam">message</span><span class="op">:</span> <span class="nam">Message</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t311" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t311">311</a></span><span class="t">    <span class="key">await</span> <span class="nam">message</span><span class="op">.</span><span class="nam">answer</span><span class="op">(</span><span class="str">'TBD: будет показывать понравится ли тебе фильм или нет'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t312" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t312">312</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t313" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t313">313</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t314" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t314">314</a></span><span class="t"><span class="com"># вариант для локального запуска</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t315" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t315">315</a></span><span class="t"><span class="com"># '''</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t316" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t316">316</a></span><span class="t"><span class="key">async</span> <span class="key">def</span> <span class="nam">main</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis"><span class="n"><a id="t317" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t317">317</a></span><span class="t">    <span class="nam">bot</span> <span class="op">=</span> <span class="nam">Bot</span><span class="op">(</span><span class="nam">token</span><span class="op">=</span><span class="nam">TOKEN</span><span class="op">,</span> <span class="nam">parse_mode</span><span class="op">=</span><span class="nam">ParseMode</span><span class="op">.</span><span class="nam">HTML</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis"><span class="n"><a id="t318" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t318">318</a></span><span class="t">    <span class="nam">dp</span> <span class="op">=</span> <span class="nam">Dispatcher</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis"><span class="n"><a id="t319" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t319">319</a></span><span class="t">    <span class="nam">dp</span><span class="op">.</span><span class="nam">include_router</span><span class="op">(</span><span class="nam">form_router</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t320" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t320">320</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="mis"><span class="n"><a id="t321" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t321">321</a></span><span class="t">    <span class="key">await</span> <span class="nam">bot</span><span class="op">.</span><span class="nam">delete_webhook</span><span class="op">(</span><span class="nam">drop_pending_updates</span><span class="op">=</span><span class="key">True</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis"><span class="n"><a id="t322" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t322">322</a></span><span class="t">    <span class="key">await</span> <span class="nam">dp</span><span class="op">.</span><span class="nam">start_polling</span><span class="op">(</span><span class="nam">bot</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t323" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t323">323</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t324" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t324">324</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t325" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t325">325</a></span><span class="t"><span class="key">if</span> <span class="nam">__name__</span> <span class="op">==</span> <span class="str">"__main__"</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis"><span class="n"><a id="t326" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t326">326</a></span><span class="t">    <span class="nam">logging</span><span class="op">.</span><span class="nam">basicConfig</span><span class="op">(</span><span class="nam">level</span><span class="op">=</span><span class="nam">logging</span><span class="op">.</span><span class="nam">INFO</span><span class="op">,</span> <span class="nam">stream</span><span class="op">=</span><span class="nam">sys</span><span class="op">.</span><span class="nam">stdout</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis"><span class="n"><a id="t327" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t327">327</a></span><span class="t">    <span class="nam">asyncio</span><span class="op">.</span><span class="nam">run</span><span class="op">(</span><span class="nam">main</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run show_run"><span class="n"><a id="t328" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t328">328</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t329" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t329">329</a></span><span class="t"><span class="str"># вариант с вебхуком для хостинга</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t330" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t330">330</a></span><span class="t"><span class="str">BASE_WEBHOOK_URL = ''</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t331" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t331">331</a></span><span class="t"><span class="str">WEBHOOK_HOST = 'https://pvv-bot-aiogram.onrender.com'</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t332" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t332">332</a></span><span class="t"><span class="str">WEBHOOK_PATH = f'/webhook/{TOKEN}'</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t333" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t333">333</a></span><span class="t"><span class="str">WEBHOOK_URL = f'{WEBHOOK_HOST}{WEBHOOK_PATH}'</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t334" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t334">334</a></span><span class="t"><span class="str">WEB_SERVER_HOST = '0.0.0.0'</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t335" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t335">335</a></span><span class="t"><span class="str">WEB_SERVER_PORT = 10000</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t336" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t336">336</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t337" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t337">337</a></span><span class="t"><span class="str">async def on_startup(bot: Bot) -&gt; None:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t338" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t338">338</a></span><span class="t"><span class="str">    await bot.set_webhook(url=WEBHOOK_URL)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t339" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t339">339</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t340" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t340">340</a></span><span class="t"><span class="str">def main() -&gt; None:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t341" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t341">341</a></span><span class="t"><span class="str">    dp = Dispatcher()</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t342" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t342">342</a></span><span class="t"><span class="str">    dp.startup.register(on_startup)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t343" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t343">343</a></span><span class="t"><span class="str">    dp.include_router(form_router)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t344" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t344">344</a></span><span class="t"><span class="str">    bot = Bot(token=TOKEN, parse_mode=ParseMode.HTML)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t345" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t345">345</a></span><span class="t"><span class="str">    app = web.Application()</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t346" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t346">346</a></span><span class="t"><span class="str">    webhook_requests_handler = SimpleRequestHandler(</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t347" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t347">347</a></span><span class="t"><span class="str">        dispatcher=dp,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t348" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t348">348</a></span><span class="t"><span class="str">        bot=bot</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t349" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t349">349</a></span><span class="t"><span class="str">    )</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t350" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t350">350</a></span><span class="t"><span class="str">    webhook_requests_handler.register(app, path=WEBHOOK_PATH)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t351" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t351">351</a></span><span class="t"><span class="str">    setup_application(app, dp, bot=bot)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t352" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t352">352</a></span><span class="t"><span class="str">    web.run_app(app, host=WEB_SERVER_HOST, port=WEB_SERVER_PORT)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t353" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t353">353</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t354" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t354">354</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t355" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t355">355</a></span><span class="t"><span class="str">if __name__ == "__main__":</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t356" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t356">356</a></span><span class="t"><span class="str">    logging.basicConfig(level=logging.INFO, stream=sys.stdout)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t357" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t357">357</a></span><span class="t"><span class="str">    asyncio.run(main())</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t358" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/main_py.html?_ijt=t6mpag64rc66k6cecjjv663f5l&amp;_ij_reload=RELOAD_ON_SAVE#t358">358</a></span><span class="t"><span class="str">'''</span>&nbsp;</span><span class="r"></span></p>
</main>
<footer>
    <div class="content">
        <p>
            <a id="prevFileLink" class="nav" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/d_a9d8ae1b01eede66_utils_py.html">« prev</a> &nbsp; &nbsp;
            <a id="indexLink" class="nav" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/index.html">^ index</a> &nbsp; &nbsp;
            <a id="nextFileLink" class="nav" href="http://localhost:63342/aiogram_bot_recsys/tests/htmlcov/d_a44f0ac069e85531_test_bot_py.html">» next</a>
            &nbsp; &nbsp; &nbsp;
            <a class="nav" href="https://coverage.readthedocs.io/en/7.4.1">coverage.py v7.4.1</a>,
            created at 2024-02-12 10:06 +0300
        </p>
    </div>
</footer>


<script>
(function() {
  var ws = new WebSocket('ws://' + window.location.host + 
             '/jb-server-page?reloadMode=RELOAD_ON_SAVE&'+
             'referrer=' + encodeURIComponent(window.location.pathname));
  ws.onmessage = function (msg) {
      if (msg.data === 'reload') {
          window.location.reload();
      }
      if (msg.data.startsWith('update-css ')) {
          var messageId = msg.data.substring(11);
          var links = document.getElementsByTagName('link');
          for (var i = 0; i < links.length; i++) {
              var link = links[i];
              if (link.rel !== 'stylesheet') continue;
              var clonedLink = link.cloneNode(true);
              var newHref = link.href.replace(/(&|\?)jbUpdateLinksId=\d+/, "$1jbUpdateLinksId=" + messageId);
              if (newHref !== link.href) {
                clonedLink.href = newHref;
              }
              else {
                var indexOfQuest = newHref.indexOf('?');
                if (indexOfQuest >= 0) {
                  // to support ?foo#hash 
                  clonedLink.href = newHref.substring(0, indexOfQuest + 1) + 'jbUpdateLinksId=' + messageId + '&' + 
                                    newHref.substring(indexOfQuest + 1);
                }
                else {
                  clonedLink.href += '?' + 'jbUpdateLinksId=' + messageId;
                }
              }
              link.replaceWith(clonedLink);
          }
      }
  };
})();
</script><div id="scroll_marker"><div id="m16" class="marker" style="height: 19.0615px; top: 78px;"></div><div id="m21" class="marker" style="height: 30.0615px; top: 102px;"></div><div id="m32" class="marker" style="height: 5.06145px; top: 156px;"></div><div id="m34" class="marker" style="height: 5.06145px; top: 166px;"></div><div id="m36" class="marker" style="height: 10.0615px; top: 176px;"></div><div id="m39" class="marker" style="height: 5.06145px; top: 191px;"></div><div id="m42" class="marker" style="height: 24.0615px; top: 206px;"></div><div id="m49" class="marker" style="height: 5.06145px; top: 240px;"></div><div id="m57" class="marker" style="height: 15.0615px; top: 280px;"></div><div id="m64" class="marker" style="height: 5.06145px; top: 314px;"></div><div id="m84" class="marker" style="height: 5.06145px; top: 413px;"></div><div id="m95" class="marker" style="height: 5.06145px; top: 467px;"></div><div id="m102" class="marker" style="height: 14.0615px; top: 502px;"></div><div id="m108" class="marker" style="height: 15.0615px; top: 531px;"></div><div id="m114" class="marker" style="height: 5.06145px; top: 561px;"></div><div id="m121" class="marker" style="height: 20.0615px; top: 595px;"></div><div id="m141" class="marker" style="height: 5.06145px; top: 694px;"></div><div id="m143" class="marker" style="height: 10.0615px; top: 704px;"></div><div id="m158" class="marker" style="height: 20.0615px; top: 778px;"></div><div id="m165" class="marker" style="height: 5.06145px; top: 812px;"></div><div id="m169" class="marker" style="height: 30.0615px; top: 832px;"></div><div id="m180" class="marker" style="height: 5.06145px; top: 886px;"></div><div id="m182" class="marker" style="height: 5.06145px; top: 896px;"></div><div id="m186" class="marker" style="height: 15.0615px; top: 916px;"></div><div id="m194" class="marker" style="height: 30.0615px; top: 955px;"></div><div id="m211" class="marker" style="height: 5.06145px; top: 1039px;"></div><div id="m215" class="marker" style="height: 5.06145px; top: 1059px;"></div><div id="m220" class="marker" style="height: 9.06145px; top: 1084px;"></div><div id="m224" class="marker" style="height: 5.06145px; top: 1103px;"></div><div id="m232" class="marker" style="height: 30.0615px; top: 1143px;"></div><div id="m244" class="marker" style="height: 5.06145px; top: 1202px;"></div><div id="m253" class="marker" style="height: 20.0615px; top: 1246px;"></div><div id="m260" class="marker" style="height: 15.0615px; top: 1281px;"></div><div id="m264" class="marker" style="height: 15.0615px; top: 1301px;"></div><div id="m270" class="marker" style="height: 20.0615px; top: 1330px;"></div><div id="m279" class="marker" style="height: 5.06145px; top: 1375px;"></div><div id="m282" class="marker" style="height: 25.0615px; top: 1389px;"></div><div id="m290" class="marker" style="height: 15.0615px; top: 1429px;"></div><div id="m294" class="marker" style="height: 10.0615px; top: 1449px;"></div><div id="m297" class="marker" style="height: 5.06145px; top: 1463px;"></div><div id="m305" class="marker" style="height: 5.06145px; top: 1503px;"></div><div id="m309" class="marker" style="height: 14.0615px; top: 1523px;"></div><div id="m316" class="marker" style="height: 5.06145px; top: 1557px;"></div><div id="m325" class="marker" style="height: 5.06145px; top: 1601px;"></div><div id="m328" class="marker" style="height: 5.06145px; top: 1616px;"></div></div></body><div class="troywell-avia"><template shadowrootmode="open">
        <style>@import url("chrome-extension://adlpodnneegcnbophopdmhedicjbcgco/content/styles.css");</style>
        <div id="troywell-avia" data-v-app=""><div class="app"><div data-v-138a3c39=""><!----></div></div></div></template></div><div class="troywell-caa"><template shadowrootmode="open">
    <style>
    @import url("chrome-extension://adlpodnneegcnbophopdmhedicjbcgco/content/styles.css");
    @import url("chrome-extension://adlpodnneegcnbophopdmhedicjbcgco/caa/styles.css");
    </style>
    <div id="troywell-caa" data-v-app=""><div class="content-app" data-v-9eaabcdc=""><!----></div></div></template></div></html>